{% extends "base.html" %}

{% block page_styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stylesempresas.css') }}">
{% endblock %}

{% block content %}
<div class="crud-container-single">
    <div class="form-section">
        <div class="form-header">
            <h2>Editando Empresa: {{ empresa.nombre_empresa }}</h2>
            <p>Modifica la informaci√≥n y las reglas de negocio de la empresa.</p>
        </div>
        
        <form action="{{ url_for('main.editar_empresa_post', id=empresa.id) }}" method="POST" class="crud-form">
            <div class="form-group">
                <label for="nombre_empresa">Nombre de la Empresa</label>
                <input type="text" id="nombre_empresa" name="nombre_empresa" value="{{ empresa.nombre_empresa }}" required>
            </div>

            <fieldset>
                <legend>Cargos por Servicio</legend>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="cargoServicioVisible" name="cargoServicioVisible" value="true" {% if empresa.cargos_servicio and empresa.cargos_servicio[0].tipo == 'visible' %}checked{% endif %}>
                    <label for="cargoServicioVisible">Cargo Visible</label>
                </div>
                 <div class="form-group">
                    <label for="cargoServicioFacturado">Monto del Cargo</label>
                    <input type="number" step="0.01" id="cargoServicioFacturado" name="cargoServicioFacturado" value="{{ empresa.cargos_servicio[0].monto if empresa.cargos_servicio else '' }}">
                </div>
            </fieldset>

            <fieldset>
                <legend>Descuentos</legend>
                <div class="form-group">
                    <label for="montoDescuento">Monto Fijo de Descuento</label>
                    <input type="number" step="0.01" id="montoDescuento" name="montoDescuento" value="{{ empresa.descuentos[0].valor if empresa.descuentos else '' }}">
                </div>
            </fieldset>
            
            <fieldset>
                <legend>Tarifas</legend>
                 <div class="form-group">
                    <label for="tarifaFija">Tarifa Fija</label>
                    <input type="number" step="0.01" id="tarifaFija" name="tarifaFija" value="{{ empresa.tarifas_fijas[0].monto if empresa.tarifas_fijas else '' }}">
                </div>
            </fieldset>
            
            <div class="form-actions">
                <button type="submit" class="btn-submit">Guardar Cambios</button>
                <a href="{{ url_for('main.empresas') }}" class="btn-cancel">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

